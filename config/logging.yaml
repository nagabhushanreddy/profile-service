# Logging Configuration for Authorization Service (standardized)
# Loaded by utils.config.Config and used by utils.logger

logging:
  version: 1
  disable_existing_loggers: false
  
  formatters:
    default:
      format: '%(asctime)s - %(name)s - %(levelname)s - %(message)s'
      datefmt: '%Y-%m-%d %H:%M:%S'
    
    detailed:
      format: '%(asctime)s - %(name)s - %(levelname)s - [%(filename)s:%(lineno)d] - %(message)s'
      datefmt: '%Y-%m-%d %H:%M:%S'
    
    json:
      class: pythonjsonlogger.json.JsonFormatter
      format: '%(asctime)s %(name)s %(levelname)s %(message)s'
  
  handlers:
    console:
      class: logging.StreamHandler
      level: ${LOG_LEVEL:INFO}
      formatter: default
      stream: ext://sys.stdout
    
    file:
      class: logging.handlers.RotatingFileHandler
      level: ${LOG_LEVEL:INFO}
      formatter: json
      filename: ${LOG_FILE_PATH:logs/profile-service.log}
      maxBytes: ${LOG_FILE_MAX_BYTES:10485760}  # 10MB
      backupCount: ${LOG_FILE_BACKUP_COUNT:5}
      encoding: utf8
  
  root:
    level: ${LOG_LEVEL:INFO}
    handlers: [console, file]
  
  loggers:
    notification-service:
      level: ${LOG_LEVEL:INFO}
      handlers: [console, file]
      propagate: false
    
    uvicorn.access:
      level: ${LOG_UVICORN_ACCESS_LEVEL:WARNING}
      handlers: [console]
      propagate: false
    
    uvicorn.error:
      level: ${LOG_UVICORN_ERROR_LEVEL:ERROR}
      handlers: [console, file]
      propagate: false
    
    httpx:
      level: ${LOG_HTTPX_LEVEL:WARNING}
      handlers: [console]
      propagate: false
    
    asyncio:
      level: ${LOG_ASYNCIO_LEVEL:WARNING}
      handlers: [console]
      propagate: false
