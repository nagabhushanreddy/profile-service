# Profile Service Application Configuration
# Environment variables can be referenced using ${VAR_NAME} or ${VAR_NAME:default_value}

service:
  name: ${APP_NAME:profile-service}
  version: ${APP_VERSION:1.0.0}
  environment: ${ENVIRONMENT:development}
  debug: ${DEBUG:false}

server:
  host: ${HOST:0.0.0.0}
  port: ${PORT:8006}

# External Service URLs (for inter-service communication)
external_services:
  auth_service:
    url: ${AUTH_SERVICE_URL:http://localhost:3001}
    timeout: ${AUTH_SERVICE_TIMEOUT:5}
  
  authz_service:
    url: ${AUTHZ_SERVICE_URL:http://localhost:3002}
    timeout: ${AUTHZ_SERVICE_TIMEOUT:5}
  
  entity_service:
    url: ${ENTITY_SERVICE_URL:http://localhost:8000}
    timeout: ${ENTITY_SERVICE_TIMEOUT:5}
  
  document_service:
    url: ${DOCUMENT_SERVICE_URL:http://localhost:8001}
    timeout: ${DOCUMENT_SERVICE_TIMEOUT:5}

# Database Configuration
database:
  engine: ${DB_ENGINE:postgresql}
  url: ${DATABASE_URL:postgresql+asyncpg://user:password@localhost:5432/profile_db}
  echo: ${DB_ECHO:false}
  pool_size: ${DB_POOL_SIZE:10}
  max_overflow: ${DB_MAX_OVERFLOW:20}

# Redis Configuration (for caching, rate limiting, sessions)
redis:
  enabled: ${REDIS_ENABLED:true}
  host: ${REDIS_HOST:localhost}
  port: ${REDIS_PORT:6379}
  db: ${REDIS_DB:1}
  password: ${REDIS_PASSWORD:}
  ttl: ${REDIS_TTL:3600}

# JWT Configuration
jwt:
  access_secret: ${JWT_ACCESS_SECRET:your-super-secret-access-key-min-32-chars}
  algorithm: ${JWT_ALGORITHM:HS256}

# Rate Limiting
rate_limiting:
  enabled: ${RATE_LIMITING_ENABLED:true}
  window_ms: ${RATE_LIMIT_WINDOW_MS:60000}  # 1 minute
  max_requests_per_user: ${RATE_LIMIT_MAX_USER:100}
  max_requests_per_tenant: ${RATE_LIMIT_MAX_TENANT:10000}
  max_requests_per_ip: ${RATE_LIMIT_MAX_IP:1000}

# Correlation ID
correlation_id:
  enabled: ${CORRELATION_ID_ENABLED:true}
  header_name: ${CORRELATION_ID_HEADER:x-correlation-id}

# CORS
cors:
  enabled: ${CORS_ENABLED:true}
  origins:
    - ${CORS_ORIGIN_1:http://localhost:3000}
    - ${CORS_ORIGIN_2:http://localhost:3001}
  allow_credentials: ${CORS_ALLOW_CREDENTIALS:true}

# API Documentation
api_docs:
  enabled: ${API_DOCS_ENABLED:true}
  title: ${API_TITLE:Profile Service API}
  version: ${API_VERSION:1.0.0}
  description: ${API_DESCRIPTION:User profile and KYC management API}

# Profile Service Specific
kyc:
  required_fields:
    - legal_name
    - date_of_birth
    - identity_document
    - address
  maker_checker_enabled: ${KYC_MAKER_CHECKER_ENABLED:true}
